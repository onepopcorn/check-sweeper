var Onepopcorn=Onepopcorn||{};Onepopcorn.Timer=function(e){function t(){c++,o.el.innerHTML=n()}function n(){var e=parseInt(c/60),t=parseInt(c)%60;return e=e.toString().length>1?e:"0"+e,t=t.toString().length>1?t:"0"+t,e+":"+t}this.el=document.querySelector("#"+e);var o=this,r=null,c=0,i=!1;Onepopcorn.Timer.prototype.start=function(){i||(r=setInterval(t,1e3),i=!0)},Onepopcorn.Timer.prototype.stop=function(){i&&(clearInterval(r),i=!1)}},Onepopcorn.Tile=function(e,t){function n(e){e.preventDefault(),r.callback(r.id)}function o(e){e.preventDefault(),r.check.checked=!r.check.checked}var r=this;this.id=e,this.type=0,this.callback=t,this.check=document.createElement("input"),this.check.setAttribute("type","checkbox"),this.el=document.createElement("div"),this.el.className="tile",this.el.setAttribute("id",e),this.el.appendChild(this.check),this.check.addEventListener("click",n),this.check.addEventListener("contextmenu",o),Onepopcorn.Tile.prototype.setValue=function(e){this.check.removeEventListener("click",n),this.el.innerHTML=e}},function(e){"use strict";function t(){u.style.width=13*v+"px";var t,o,r=0;for(t=0;f>t;t++)for(p.push([]),o=0;v>o;o++){var c=new Onepopcorn.Tile(t*f+o,n);c.type=w.CLEAR,u.appendChild(c.el),p[t][o]=c,r++}for(var i=h;i>0;){var s=a(),d=l(s),m=p[d[0]][d[1]];m.type===w.CLEAR&&(m.type=w.BOMB,i--)}t=o=r=i=null,O.start(),e.onfocus=function(){O.start()},e.onblur=function(){O.stop()}}function n(e){var t=l(e),n=p[t[0]][t[1]];if(n.type===w.BOMB)n.setValue("x"),o();else{n.type=w.CHECKED;var c=i(t[0],t[1]);0===c?(n.setValue(""),r(t[0],t[1])):n.setValue(c),s++,s===d&&o(!0)}return!1}function o(t){O.stop();var n=t===!0?"CONGRATULATIONS YOU WIN":"GAME OVER",o=e.confirm(n+"\nplay again?");o&&(e.location="/")}function r(e,t){for(var o in m){var r=m[o];if(c(e+r.row,t+r.col)){var i=p[e+r.row][t+r.col];i.type!==w.CHECKED&&n(i.id)}}}function c(e,t){return e>=0&&f>e&&t>=0&&v>t}function i(e,t){var n=0;for(var o in m){var r=m[o];c(e+r.row,t+r.col)&&p[e+r.row][t+r.col].type===w.BOMB&&n++}return n}function l(e){var t=Math.floor(e/v),n=e-t*f;return[t,n]}function a(){var e=Math.round(f*v*Math.random());return e}var u=document.querySelector("#gameboard"),p=[],s=0,h=10,f=7,v=7,d=f*v-h,w={CLEAR:0,BOMB:1,CHECKED:-1},m=[{row:-1,col:-1},{row:-1,col:0},{row:-1,col:1},{row:0,col:1},{row:1,col:1},{row:1,col:0},{row:1,col:-1},{row:0,col:-1}],O=new Onepopcorn.Timer("timer");t()}(this);
//# sourceMappingURL=main.js.map