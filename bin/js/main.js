var Onepopcorn=Onepopcorn||{};Onepopcorn.Timer=function(t){function e(){var t=parseInt(n/60),e=parseInt(n)%60;return t=t.toString().length>1?t:"0"+t,e=e.toString().length>1?e:"0"+e,t+":"+e}this.el=document.querySelector("#"+t),this._timerId=null,this_isActive=!1;var n=0,i=this;this.update=function(){n++,i.el.innerHTML=e()}},Onepopcorn.Timer.prototype.start=function(){this._isActive||(this._timerId=setInterval(this.update,1e3),this._isActive=!0)},Onepopcorn.Timer.prototype.stop=function(){this._isActive&&(clearInterval(this._timerId),this._isActive=!1)},Onepopcorn.Tile=function(t,e){function n(t){t.preventDefault(),r.callback(r.id)}function i(t){t.preventDefault(),r.check.checked=!r.check.checked}var r=this;this.id=t,this.type=0,this.callback=e,this.check=document.createElement("input"),this.check.setAttribute("type","checkbox"),this.el=document.createElement("div"),this.el.className="tile",this.el.setAttribute("id",t),this.el.appendChild(this.check),this.check.addEventListener("click",n),this.check.addEventListener("contextmenu",i),this.unbind=function(){this.check.removeEventListener("click",n)}},Onepopcorn.Tile.prototype.setValue=function(t){this.unbind(),this.el.innerHTML=t},function(t){"use strict";function e(){l.style.width=13*f+"px";var e,i,r=0;for(e=0;v>e;e++)for(u.push([]),i=0;f>i;i++){var o=new Onepopcorn.Tile(e*v+i,n);o.type=m.CLEAR,l.appendChild(o.el),u[e][i]=o,r++}for(var c=p;c>0;){var h=a(),d=s(h),O=u[d[0]][d[1]];O.type===m.CLEAR&&(O.type=m.BOMB,c--)}e=i=r=c=null,y.start(),t.onfocus=function(){y.start()},t.onblur=function(){y.stop()}}function n(t){var e=s(t),n=u[e[0]][e[1]];if(n.type===m.BOMB)n.setValue("x"),i();else{n.type=m.CHECKED;var o=c(e[0],e[1]);0===o?(n.setValue(""),r(e[0],e[1])):n.setValue(o),h++,h===d&&i(!0)}return!1}function i(e){y.stop();var n=e===!0?"CONGRATULATIONS YOU WIN":"GAME OVER",i=t.confirm(n+"\nplay again?");i&&(t.location="/")}function r(t,e){for(var i in O){var r=O[i];if(o(t+r.row,e+r.col)){var c=u[t+r.row][e+r.col];c.type!==m.CHECKED&&n(c.id)}}}function o(t,e){return t>=0&&v>t&&e>=0&&f>e}function c(t,e){var n=0;for(var i in O){var r=O[i];o(t+r.row,e+r.col)&&u[t+r.row][e+r.col].type===m.BOMB&&n++}return n}function s(t){var e=Math.floor(t/f),n=t-e*v;return[e,n]}function a(){var t=Math.round(v*f*Math.random());return t}var l=document.querySelector("#gameboard"),u=[],h=0,p=10,v=7,f=7,d=v*f-p,m={CLEAR:0,BOMB:1,CHECKED:-1},O=[{row:-1,col:-1},{row:-1,col:0},{row:-1,col:1},{row:0,col:1},{row:1,col:1},{row:1,col:0},{row:1,col:-1},{row:0,col:-1}],y=new Onepopcorn.Timer("timer");e()}(this);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiT25lcG9wY29ybiIsIlRpbWVyIiwiaWQiLCJ0b1RpbWUiLCJtaW51dGVzIiwicGFyc2VJbnQiLCJfY291bnRlciIsInNlY29uZHMiLCJ0b1N0cmluZyIsImxlbmd0aCIsInRoaXMiLCJlbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl90aW1lcklkIiwidGhpc19pc0FjdGl2ZSIsInNlbGYiLCJ1cGRhdGUiLCJpbm5lckhUTUwiLCJwcm90b3R5cGUiLCJzdGFydCIsIl9pc0FjdGl2ZSIsInNldEludGVydmFsIiwic3RvcCIsImNsZWFySW50ZXJ2YWwiLCJUaWxlIiwiY2FsbGJhY2siLCJvbkNsaWNrIiwiZSIsInByZXZlbnREZWZhdWx0Iiwib25SaWdodENsaWNrIiwiY2hlY2siLCJjaGVja2VkIiwidHlwZSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1bmJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0VmFsdWUiLCJ2YWwiLCJ3aW5kb3ciLCJpbml0IiwiYm9hcmQiLCJzdHlsZSIsIndpZHRoIiwiQ09MU19OVU0iLCJpIiwiaiIsImNvdW50IiwiUk9XU19OVU0iLCJ0aWxlcyIsInB1c2giLCJ0IiwicmV2ZWFsQ2hlY2tib3giLCJUWVBFIiwiQ0xFQVIiLCJ0b3RhbE1pbmVzIiwiTUlORVNfTlVNIiwiaWR4IiwiZ2V0UmFuZG9tVGlsZUluZGV4IiwiY29vcmRzIiwiZ2V0VGlsZUZyb21JbmRleCIsInRpbGUiLCJCT01CIiwidGltZXIiLCJvbmZvY3VzIiwib25ibHVyIiwiZ2FtZW92ZXIiLCJDSEVDS0VEIiwibWluZXNOZWFyIiwiY2hlY2tOZWFyTWluZXMiLCJjbGVhck5lYXJNaW5lcyIsImRpc2FybWVkIiwiQ0xFQVJfVElMRVMiLCJ3aW4iLCJtZXNzYWdlIiwiY29uZmlybSIsImxvY2F0aW9uIiwicm93IiwiY29sIiwiRElSRUNUSU9OUyIsImRpciIsImlzSW5Cb3VuZHMiLCJtaW5lcyIsIk1hdGgiLCJmbG9vciIsInJkbiIsInJvdW5kIiwicmFuZG9tIl0sIm1hcHBpbmdzIjoiQUFDQSxHQUFJQSxZQUFhQSxjQVVqQkEsWUFBV0MsTUFBUSxTQUFVQyxHQVE1QixRQUFTQyxLQUNSLEdBQUlDLEdBQVVDLFNBQVNDLEVBQVcsSUFDakNDLEVBQVVGLFNBQVNDLEdBQVksRUFLaEMsT0FIQUYsR0FBVUEsRUFBUUksV0FBV0MsT0FBUyxFQUFJTCxFQUFVLElBQU1BLEVBQzFERyxFQUFVQSxFQUFRQyxXQUFXQyxPQUFTLEVBQUlGLEVBQVUsSUFBTUEsRUFFbkRILEVBQVUsSUFBTUcsRUFkeEJHLEtBQUtDLEdBQUtDLFNBQVNDLGNBQWMsSUFBSVgsR0FDckNRLEtBQUtJLFNBQVcsS0FDaEJDLGVBQWdCLENBQ2hCLElBQUlULEdBQVcsRUFDWFUsRUFBT04sSUFhWEEsTUFBS08sT0FBUyxXQUNiWCxJQUNBVSxFQUFLTCxHQUFHTyxVQUFZZixNQUt0QkgsV0FBV0MsTUFBTWtCLFVBQVVDLE1BQVEsV0FDOUJWLEtBQUtXLFlBQ1JYLEtBQUtJLFNBQVdRLFlBQVlaLEtBQUtPLE9BQU8sS0FDeENQLEtBQUtXLFdBQWEsSUFJcEJyQixXQUFXQyxNQUFNa0IsVUFBVUksS0FBTyxXQUM5QmIsS0FBS1csWUFFUEcsY0FBY2QsS0FBS0ksVUFDbkJKLEtBQUtXLFdBQVksSUFZbkJyQixXQUFXeUIsS0FBTyxTQUFVdkIsRUFBR3dCLEdBYzlCLFFBQVNDLEdBQVFDLEdBQ2hCQSxFQUFFQyxpQkFDRmIsRUFBS1UsU0FBU1YsRUFBS2QsSUFLcEIsUUFBUzRCLEdBQWFGLEdBQ3JCQSxFQUFFQyxpQkFDRmIsRUFBS2UsTUFBTUMsU0FBV2hCLEVBQUtlLE1BQU1DLFFBdEJsQyxHQUFJaEIsR0FBT04sSUFDWEEsTUFBS1IsR0FBS0EsRUFDVlEsS0FBS3VCLEtBQU8sRUFDWnZCLEtBQUtnQixTQUFXQSxFQUVoQmhCLEtBQUtxQixNQUFRbkIs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QUlyQyxLQUFLa0MsR0FDYixDQUNDLEdBQUlDLEdBQU1ELEVBQVdsQyxFQUNqQm9DLEdBQVdKLEVBQU1HLEVBQUlILElBQUtDLEVBQU1FLEVBQUlGLE1BS3JDN0IsRUFBTTRCLEVBQU1HLEVBQUlILEtBQUtDLEVBQU1FLEVBQUlGLEtBQUtqRCxPQUFTd0IsRUFBS1MsTUFDcERvQixJQUlGLE1BQU9BLEdBSVIsUUFBU3RCLEdBQWlCSCxHQUN6QixHQUFJb0IsR0FBTU0sS0FBS0MsTUFBTTNCLEVBQU1iLEdBQzFCa0MsRUFBTXJCLEVBQU1vQixFQUFNN0IsQ0FDbkIsUUFBUTZCLEVBQUlDLEdBR2IsUUFBU3BCLEtBQ1IsR0FBSTJCLEdBQU1GLEtBQUtHLE1BQU10QyxFQUFXSixFQUFXdUMsS0FBS0ksU0FDaEQsT0FBT0YsR0FyS1IsR0FBSTVDLEdBQWNqQyxTQUFTQyxjQUFjLGNBQ3hDd0MsS0FDQXNCLEVBQWMsRUFDZGYsRUFBYyxHQUNkUixFQUFjLEVBQ2RKLEVBQWMsRUFDZDRCLEVBQWN4QixFQUFXSixFQUFXWSxFQUNwQ0gsR0FBZUMsTUFBUSxFQUFFUSxLQUFPLEVBQUVLLFFBQVksSUFDOUNZLElBQ0VGLElBQU0sR0FBR0MsSUFBTSxLQUNmRCxJQUFNLEdBQUdDLElBQU0sSUFDZkQsSUFBTSxHQUFHQyxJQUFNLElBQ2ZELElBQU0sRUFBRUMsSUFBTSxJQUNkRCxJQUFNLEVBQUdDLElBQU0sSUFDZkQsSUFBTSxFQUFHQyxJQUFNLElBQ2ZELElBQU0sRUFBR0MsSUFBTSxLQUNmRCxJQUFNLEVBQUVDLElBQU0sS0FHYmYsRUFBUSxHQUFJbkUsWUFBV0MsTUFBTSxRQXNKakMyQyxNQUNFbEMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIERlZmluZSBtb2R1bGUgbmFtZXNwYWNlXHJcbnZhciBPbmVwb3Bjb3JuID0gT25lcG9wY29ybiB8fCB7fTtcclxuXHJcbi8qXHJcbiAqIEBDbGFzcyBUaW1lclxyXG4gKiBcclxuICogQSBzdG9wd2F0Y2ggY2xhc3MgdG8gY291bnQgZWxhcHNlZCBtaW51dGVzIGFuZCBzZWNvbmRzLlxyXG4gKlxyXG4gKiBAbmFtZXNwYWNlIE9uZXBvcGNvcm5cclxuICogQHBhcmFtIHtTdHJpbmd9IElkIG9mIHRoZSBIVE1MIGVsZW1lbnQgdGhhdCBob2xkcyB0aGUgY291bnRlci5cclxuICovXHJcbk9uZXBvcGNvcm4uVGltZXIgPSBmdW5jdGlvbiAoaWQpe1xyXG5cdHRoaXMuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJytpZCk7XHJcblx0dGhpcy5fdGltZXJJZCA9IG51bGw7XHJcblx0dGhpc19pc0FjdGl2ZSA9IGZhbHNlO1xyXG5cdHZhciBfY291bnRlciA9IDA7XHJcblx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHQvLyBQcml2YXRlIG1ldGhvZHNcclxuXHRmdW5jdGlvbiB0b1RpbWUoKXtcclxuXHRcdHZhciBtaW51dGVzID0gcGFyc2VJbnQoX2NvdW50ZXIgLyA2MCksXHJcblx0XHRcdHNlY29uZHMgPSBwYXJzZUludChfY291bnRlcikgJSA2MDtcclxuXHRcdFxyXG5cdFx0bWludXRlcyA9IG1pbnV0ZXMudG9TdHJpbmcoKS5sZW5ndGggPiAxID8gbWludXRlcyA6IFwiMFwiICsgbWludXRlcztcclxuXHRcdHNlY29uZHMgPSBzZWNvbmRzLnRvU3RyaW5nKCkubGVuZ3RoID4gMSA/IHNlY29uZHMgOiBcIjBcIiArIHNlY29uZHM7XHJcblx0XHRcclxuXHRcdHJldHVybiBtaW51dGVzICsgXCI6XCIgKyBzZWNvbmRzO1xyXG5cdH1cclxuXHJcblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKXtcclxuXHRcdF9jb3VudGVyKys7XHJcblx0XHRzZWxmLmVsLmlubmVySFRNTCA9IHRvVGltZSgpO1xyXG5cdH07XHJcbn07XHJcblxyXG4vLyBQdWJsaWMgbWV0aG9kc1xyXG5PbmVwb3Bjb3JuLlRpbWVyLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KCl7XHJcblx0aWYoIXRoaXMuX2lzQWN0aXZlKXtcclxuXHRcdHRoaXMuX3RpbWVySWQgPSBzZXRJbnRlcnZhbCh0aGlzLnVwZGF0ZSwxMDAwKTtcclxuXHRcdHRoaXMuX2lzQWN0aXZlID0gIHRydWU7XHJcblx0fVxyXG59O1xyXG5cclxuT25lcG9wY29ybi5UaW1lci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKXtcclxuXHRpZih0aGlzLl9pc0FjdGl2ZSlcclxuXHR7XHJcblx0XHRjbGVhckludGVydmFsKHRoaXMuX3RpbWVySWQpO1xyXG5cdFx0dGhpcy5faXNBY3RpdmUgPSBmYWxzZTtcclxuXHR9XHJcbn07XHJcblxyXG4vKlxyXG4gKiBAQ2xhc3MgVGlsZVxyXG4gKiBcclxuICogQSBjbGFzcyB0byBoYW5kbGUgdGhlIHRpbGUgZWxlbWVudHMgYW5kIGFjdGlvbnNcclxuICpcclxuICogQHBhcmFtIHtJbnR9IElEIG9mIHRoZSB0aWxlXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IENhbGxiYWNrIHRvIGJlIHRyaWdnZXJlZCBvbiBjbGlja1xyXG4gKi9cclxuT25lcG9wY29ybi5UaWxlID0gZnVuY3Rpb24gKGlkLGNhbGxiYWNrKXtcclxuXHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0dGhpcy5pZCA9IGlkO1xyXG5cdHRoaXMudHlwZSA9IDA7IC8vIEFsd2F5cyBpbml0aWFsaXplZCBhcyBUWVBFLkNMRUFSIG9yIDBcclxuXHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblx0Ly8gQ3JlYXRlIGFuZCBhc3NpZ24gY2hlY2tib3ggZWxlbWVudFxyXG5cdHRoaXMuY2hlY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xyXG5cdHRoaXMuY2hlY2suc2V0QXR0cmlidXRlKCd0eXBlJywnY2hlY2tib3gnKTtcclxuXHQvLyBDcmVhdGUgYW5kIGFzc2lnbiBkaXYgZWxlbWVudFxyXG5cdHRoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHR0aGlzLmVsLmNsYXNzTmFtZSA9IFwidGlsZVwiO1xyXG5cdHRoaXMuZWwuc2V0QXR0cmlidXRlKCdpZCcsaWQpO1xyXG5cdHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5jaGVjayk7XHJcblx0XHJcblx0ZnVuY3Rpb24gb25DbGljayhlKXtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHNlbGYuY2FsbGJhY2soc2VsZi5pZCk7XHJcblx0fVxyXG5cdHRoaXMuY2hlY2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLG9uQ2xpY2spO1xyXG5cclxuXHQvLyBUaGlzIGlzIHVzZWQgdG8gbWFyayBhIGNoZWNrYm94IGFzIGEgbWluZXN3ZWVwZXIgXCJmbGFnXCIgd2l0aCB0aGUgcmlnaHQgbW91c2UgYnV0dG9uXHJcblx0ZnVuY3Rpb24gb25SaWdodENsaWNrKGUpe1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0c2VsZi5jaGVjay5jaGVja2VkID0gIXNlbGYuY2hlY2suY2hlY2tlZDtcclxuXHR9XHJcblx0dGhpcy5jaGVjay5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsb25SaWdodENsaWNrKTtcclxuXHJcblx0dGhpcy51bmJpbmQgPSBmdW5jdGlvbiB1bmJpbmQoKXtcclxuXHRcdHRoaXMuY2hlY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLG9uQ2xpY2spO1xyXG5cdH07XHJcbn07IFxyXG4vLyBUaGlzIG11c3Qgc2V0IHRoZSBuZWFyIGJvbWJzIG51bWJlciBvciBlbXB0eSB2YWx1ZS5cclxuT25lcG9wY29ybi5UaWxlLnByb3RvdHlwZS5zZXRWYWx1ZSA9IGZ1bmN0aW9uKHZhbCl7XHJcblx0dGhpcy51bmJpbmQoKTtcclxuXHR0aGlzLmVsLmlubmVySFRNTCA9IHZhbDtcclxufTtcclxuXHJcbihmdW5jdGlvbih3aW5kb3cpe1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHQvLyBDYWNoZSB0aGUgYm9hcmQgZWxlbWVudFxyXG5cdHZhciBib2FyZCAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnYW1lYm9hcmQnKSxcclxuXHRcdHRpbGVzICAgICAgID0gW10sXHJcblx0XHRkaXNhcm1lZCAgICA9IDAsXHJcblx0XHRNSU5FU19OVU0gICA9IDEwLFxyXG5cdFx0Uk9XU19OVU0gICAgPSA3LFxyXG5cdFx0Q09MU19OVU0gICAgPSA3LFxyXG5cdFx0Q0xFQVJfVElMRVMgPSBST1dTX05VTSAqIENPTFNfTlVNIC0gTUlORVNfTlVNLFxyXG5cdFx0VFlQRSAgICAgICAgPSB7XCJDTEVBUlwiOjAsXCJCT01CXCI6MSxcIkNIRUNLRURcIiA6IC0xfSxcclxuXHRcdERJUkVDVElPTlMgID0gW1xyXG5cdFx0XHR7XCJyb3dcIjotMSxcImNvbFwiOi0xfSwgLy8gVXBwZXIgbGVmdCB0aWxlXHJcblx0XHRcdHtcInJvd1wiOi0xLFwiY29sXCI6MH0sIC8vIFVwcGVyIHRpbGVcclxuXHRcdFx0e1wicm93XCI6LTEsXCJjb2xcIjoxfSwgLy8gVXBwZXIgcmlnaHQgdGlsZVxyXG5cdFx0XHR7XCJyb3dcIjowLFwiY29sXCI6MX0sIC8vIFJpZ2h0IHRpbGVcclxuXHRcdFx0e1wicm93XCI6KzEsXCJjb2xcIjorMX0sIC8vIFJpZ2h0IGRvd24gdGlsZVxyXG5cdFx0XHR7XCJyb3dcIjorMSxcImNvbFwiOjB9LCAvLyBEb3duIHRpbGVcclxuXHRcdFx0e1wicm93XCI6KzEsXCJjb2xcIjotMX0sIC8vIERvd24gbGVmdCB0aWxlXHJcblx0XHRcdHtcInJvd1wiOjAsXCJjb2xcIjotMX0sIC8vIExlZnQgdGlsZVxyXG5cdFx0XTtcclxuXHJcblx0dmFyIHRpbWVyID0gbmV3IE9uZXBvcGNvcm4uVGltZXIoXCJ0aW1lclwiKTtcclxuXHRcclxuXHQvLyBJbml0aWFsaXplIGdhbWVcclxuXHRmdW5jdGlvbiBpbml0ICgpe1xyXG5cdFx0Ly8gU2V0IGJvYXJkIGNvcnJlY3Qgc2l6ZVxyXG5cdFx0Ym9hcmQuc3R5bGUud2lkdGggPSBDT0xTX05VTSAqIDEzICsgXCJweFwiO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBnYW1lIGJvYXJkICYgYXJyYXlcclxuXHRcdHZhciBpLGosY291bnQgPSAwO1xyXG5cdFx0Zm9yKGk9MDtpPFJPV1NfTlVNO2krKylcclxuXHRcdHtcclxuXHRcdFx0dGlsZXMucHVzaChbXSk7XHJcblx0XHRcdGZvcihqPTA7ajxDT0xTX05VTTtqKyspXHJcblx0XHRcdHtcclxuXHRcdFx0XHR2YXIgdCA9IG5ldyBPbmVwb3Bjb3JuLlRpbGUoaSAqIFJPV1NfTlVNICsgaixyZXZlYWxDaGVja2JveCk7XHJcblx0XHRcdFx0dC50eXBlID0gVFlQRS5DTEVBUjtcclxuXHRcdFx0XHRib2FyZC5hcHBlbmRDaGlsZCh0LmVsKTtcclxuXHRcdFx0XHR0aWxlc1tpXVtqXSA9IHQ7XHJcblx0XHRcdFx0Y291bnQrKztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldCByYW5kb20gbWluZXNcclxuXHRcdHZhciB0b3RhbE1pbmVzID0gTUlORVNfTlVNO1xyXG5cdFx0d2hpbGUodG90YWxNaW5lcyA+IDApXHJcblx0XHR7XHJcblx0XHRcdHZhciBpZHggICAgPSBnZXRSYW5kb21UaWxlSW5kZXgoKSxcclxuXHRcdFx0XHRjb29yZHMgPSBnZXRUaWxlRnJvbUluZGV4KGlkeCksXHJcblx0XHRcdFx0dGlsZSAgID0gdGlsZXNbY29vcmRzWzBdXVtjb29yZHNbMV1dO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYodGlsZS50eXBlID09PSBUWVBFLkNMRUFSKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dGlsZS50eXBlID0gVFlQRS5CT01CO1xyXG5cdFx0XHRcdHRvdGFsTWluZXMtLTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENsZWFuIHVubmVjZXNzYXJ5IHZhcnNcclxuXHRcdGkgPSBqID0gY291bnQgPSB0b3RhbE1pbmVzID0gbnVsbDtcclxuXHJcblx0XHQvLyBTdGFydCB0aW1lciAmIGtlZXAgcnVubmluZyBvbmx5IGlmIGN1cnJlbnQgdGFiIGlzIGluIGZvY3VzXHJcblx0XHR0aW1lci5zdGFydCgpO1xyXG5cdFx0d2luZG93Lm9uZm9jdXMgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHR0aW1lci5zdGFydCgpO1xyXG5cdFx0fTtcclxuXHJcblx0XHR3aW5kb3cub25ibHVyID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0dGltZXIuc3RvcCgpO1xyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdC8vIFRoaXMgaXMgdXNlZCB0byByZW1vdmUgYSBjaGVja2JveCBhbmQgcmV2ZWFsIHdoYXQncyBiZWhpbmRcclxuXHRmdW5jdGlvbiByZXZlYWxDaGVja2JveCAoaWQpe1xyXG5cdFx0Ly8gR2V0IHRoZSB2YWx1ZSBcImJlaGluZFwiIHRoZSB0aWxlXHJcblx0XHR2YXIgY29vcmRzID0gZ2V0VGlsZUZyb21JbmRleChpZCksXHJcblx0XHRcdHRpbGUgICA9IHRpbGVzW2Nvb3Jkc1swXV1bY29vcmRzWzFdXTtcclxuXHJcblx0XHQvLyBJZiB2YWx1ZSBpcyBhIG1pbmUgeW91IGxvc2UgaWYgbm90IGNvbnRpbnVlIHBsYXlpbmdcclxuXHRcdGlmKHRpbGUudHlwZSA9PT0gVFlQRS5CT01CKVxyXG5cdFx0e1xyXG5cdFx0XHR0aWxlLnNldFZhbHVlKCd4Jyk7XHJcblx0XHRcdGdhbWVvdmVyKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBNYXJrIGFzIHJldmVhbGVkXHJcblx0XHRcdHRpbGUudHlwZSA9IFRZUEUuQ0hFQ0tFRDtcclxuXHRcdFx0Ly8gQ2hlY2sgaG93IG1hbnkgbWluZXMgYXJlIG5lYXJcclxuXHRcdFx0dmFyIG1pbmVzTmVhciA9IGNoZWNrTmVhck1pbmVzKGNvb3Jkc1swXSxjb29yZHNbMV0pO1xyXG5cdFx0XHRpZihtaW5lc05lYXIgPT09IDApIHtcclxuXHRcdFx0XHR0aWxlLnNldFZhbHVlKCcnKTtcclxuXHRcdFx0XHQvLyBDaGVjayBuZWFyIG1pbmVzIGFnYWluXHJcblx0XHRcdFx0Y2xlYXJOZWFyTWluZXMoY29vcmRzWzBdLGNvb3Jkc1sxXSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGlsZS5zZXRWYWx1ZShtaW5lc05lYXIpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiBhbGwgbWluZXMgaGFzIGJlZW4gcmVtb3ZlZFxyXG5cdFx0XHRkaXNhcm1lZCsrO1xyXG5cdFx0XHRpZihkaXNhcm1lZCA9PT0gIENMRUFSX1RJTEVTKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Z2FtZW92ZXIodHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGdhbWVvdmVyICh3aW4pe1xyXG5cdFx0dGltZXIuc3RvcCgpO1xyXG5cdFx0dmFyIG1lc3NhZ2UgPSB3aW4gPT09IHRydWUgPyBcIkNPTkdSQVRVTEFUSU9OUyBZT1UgV0lOXCIgOiBcIkdBTUUgT1ZFUlwiO1xyXG5cdFx0dmFyIGNvbmZpcm0gPSB3aW5kb3cuY29uZmlybShtZXNzYWdlK1wiXFxucGxheSBhZ2Fpbj9cIik7XHJcblx0XHRpZiAoY29uZmlybSlcclxuXHRcdHtcclxuXHRcdFx0Ly8gSSBrbm93IHRoaXMgaXMgdmVyeSBsYXp5IHNvbHV0aW9uLiBBIHJlYWwgY29vbCBjb29sIG9uZSBcclxuXHRcdFx0Ly8gIHNob3VsZCBjbGVhbiBldmVyeXRoaW5nIGFuZCBzZXQgYSBuZXcgZ2FtZS5cclxuXHRcdFx0d2luZG93LmxvY2F0aW9uID0gXCIvXCI7XHJcblx0XHR9XHJcblx0XHRcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGNsZWFyTmVhck1pbmVzIChyb3csY29sKXtcclxuXHRcdGZvcih2YXIgaSBpbiBESVJFQ1RJT05TKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgZGlyID0gRElSRUNUSU9OU1tpXTtcclxuXHRcdFx0aWYoIWlzSW5Cb3VuZHMocm93ICsgZGlyLnJvdywgY29sICsgZGlyLmNvbCkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgdGlsZSA9IHRpbGVzW3JvdyArIGRpci5yb3ddW2NvbCArIGRpci5jb2xdO1xyXG5cdFx0XHRpZih0aWxlLnR5cGUgIT09IFRZUEUuQ0hFQ0tFRClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldmVhbENoZWNrYm94KHRpbGUuaWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY2hlY2sgaWYgYW5hbGl6ZWQgdGlsZSBleGlzdHMuXHJcblx0ZnVuY3Rpb24gaXNJbkJvdW5kcyAocm93LGNvbCl7XHJcblx0XHRyZXR1cm4gcm93ID49IDAgJiYgcm93IDwgUk9XU19OVU0gJiYgY29sID49IDAgJiYgY29sIDwgQ09MU19OVU07XHJcblx0fVxyXG5cdC8vIFRPRE86IExvb2sgYXQgZmxvb2QgZmlsbCBhbGdvcml0aG1cclxuXHRmdW5jdGlvbiBjaGVja05lYXJNaW5lcyAocm93LGNvbCl7XHJcblx0XHR2YXIgbWluZXMgPSAwO1xyXG5cdFx0Zm9yKHZhciBpIGluIERJUkVDVElPTlMpXHJcblx0XHR7XHJcblx0XHRcdHZhciBkaXIgPSBESVJFQ1RJT05TW2ldO1xyXG5cdFx0XHRpZighaXNJbkJvdW5kcyhyb3cgKyBkaXIucm93LCBjb2wgKyBkaXIuY29sKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnRpbnVlO1x0XHJcblx0XHRcdH0gXHJcblxyXG5cdFx0XHRpZih0aWxlc1tyb3cgKyBkaXIucm93XVtjb2wgKyBkaXIuY29sXS50eXBlID09PSBUWVBFLkJPTUIpe1xyXG5cdFx0XHRcdG1pbmVzKys7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIG1pbmVzO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IHJvdyBhbmQgY29sIGZvciBhIGdpdmVuIGNoaWxkIGluZGV4XHJcblx0ZnVuY3Rpb24gZ2V0VGlsZUZyb21JbmRleChpZHgpe1xyXG5cdFx0dmFyIHJvdyA9IE1hdGguZmxvb3IoaWR4IC8gQ09MU19OVU0pLFxyXG5cdFx0XHRjb2wgPSBpZHggLSByb3cgKiBST1dTX05VTTtcclxuXHRcdHJldHVybiBbcm93LGNvbF07XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBnZXRSYW5kb21UaWxlSW5kZXgoKXtcclxuXHRcdHZhciByZG4gPSBNYXRoLnJvdW5kKFJPV1NfTlVNICogQ09MU19OVU0gKiBNYXRoLnJhbmRvbSgpICk7XHJcblx0XHRyZXR1cm4gcmRuO1xyXG5cdH1cclxuXHJcblx0Ly8gTGV0J3Mgc3RhcnRcclxuXHRpbml0KCk7XHJcbn0pKHRoaXMpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==