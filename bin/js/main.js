"strict mode";var Onepopcorn=Onepopcorn||{};Onepopcorn.Timer=function(e){function t(){c++,o.el.innerHTML=n()}function n(){var e=parseInt(c/60),t=parseInt(c)%60;return e=e.toString().length>1?e:"0"+e,t=t.toString().length>1?t:"0"+t,e+":"+t}this.el=document.querySelector("#"+e);var o=this,r=null,c=0,i=!1;Onepopcorn.Timer.prototype.start=function(){i||(r=setInterval(t,1e3),i=!0)},Onepopcorn.Timer.prototype.stop=function(){i&&(clearInterval(r),i=!1)}},Onepopcorn.Tile=function(e,t){function n(e){e.preventDefault(),r.callback(r.id)}function o(e){e.preventDefault(),r.check.checked=!r.check.checked}var r=this;this.id=e,this.type=0,this.callback=t,this.check=document.createElement("input"),this.check.setAttribute("type","checkbox"),this.el=document.createElement("div"),this.el.className="tile",this.el.setAttribute("id",e),this.el.appendChild(this.check),this.check.addEventListener("click",n),this.check.addEventListener("contextmenu",o),Onepopcorn.Tile.prototype.setValue=function(e){this.check.removeEventListener("click",n),this.el.innerHTML=e}},function(){function e(){a.style.width=13*f+"px";var e,n,o=0;for(e=0;h>e;e++)for(p.push([]),n=0;f>n;n++){var r=new Onepopcorn.Tile(e*h+n,t);r.type=d.CLEAR,a.appendChild(r.el),p[e][n]=r,o++}for(var c=s;c>0;){var u=l(),v=i(u),r=p[v[0]][v[1]];r.type===d.CLEAR&&(r.type=d.BOMB,c--)}c=null,m.start(),window.onfocus=function(){m.start()},window.onblur=function(){m.stop()}}function t(e){var t=i(e),r=p[t[0]][t[1]];if(r.type===d.BOMB)r.setValue("x"),n();else{r.type=d.CHECKED;var l=c(t[0],t[1]);0===l?(r.setValue(""),o(t[0],t[1])):r.setValue(l),u++,u===v&&n(!0)}return!1}function n(e){m.stop();var t=e===!0?"CONGRATULATIONS YOU WIN":"GAME OVER",n=window.confirm(t+"\nplay again?");n&&(window.location="/")}function o(e,n){for(var o in w){var c=w[o];if(r(e+c.row,n+c.col)){var i=p[e+c.row][n+c.col];i.type!==d.CHECKED&&t(i.id)}}}function r(e,t){return e>=0&&h>e&&t>=0&&f>t}function c(e,t){var n=0;for(var o in w){var c=w[o];r(e+c.row,t+c.col)&&p[e+c.row][t+c.col].type===d.BOMB&&n++}return n}function i(e){var t=Math.floor(e/f),n=e-t*h;return[t,n]}function l(){var e=Math.round(h*f*Math.random());return e}var a=document.querySelector("#gameboard"),p=[],u=0,s=10,h=7,f=7,v=h*f-s,d={CLEAR:0,BOMB:1,CHECKED:-1},w=[{row:-1,col:-1},{row:-1,col:0},{row:-1,col:1},{row:0,col:1},{row:1,col:1},{row:1,col:0},{row:1,col:-1},{row:0,col:-1}],m=new Onepopcorn.Timer("timer");e()}();
//# sourceMappingURL=main.js.map