var Onepopcorn=Onepopcorn||{};!function(){Onepopcorn.Timer=function(t){function e(){var t=parseInt(n/60),e=parseInt(n)%60;return t=t.toString().length>1?t:"0"+t,e=e.toString().length>1?e:"0"+e,t+":"+e}this.el=document.querySelector("#"+t),this._timerId=null,this_isActive=!1;var n=0,i=this;this.update=function(){n++,i.el.innerHTML=e()}},Onepopcorn.Timer.prototype.start=function(){this._isActive||(this._timerId=setInterval(this.update,1e3),this._isActive=!0)},Onepopcorn.Timer.prototype.stop=function(){this._isActive&&(clearInterval(this._timerId),this._isActive=!1)}}(),function(){Onepopcorn.Tile=function(t,e){function n(t){t.preventDefault(),o.callback(o.id)}function i(t){t.preventDefault(),o.check.checked=!o.check.checked}var o=this;this.id=t,this.type=0,this.callback=e,this.check=document.createElement("input"),this.check.setAttribute("type","checkbox"),this.el=document.createElement("div"),this.el.className="tile",this.el.setAttribute("id",t),this.el.appendChild(this.check),this.check.addEventListener("click",n),this.check.addEventListener("contextmenu",i),this.unbind=function(){this.check.removeEventListener("click",n)}},Onepopcorn.Tile.prototype.setValue=function(t){this.unbind(),this.el.innerHTML=t}}(),function(t){"use strict";function e(){l.style.width=13*v+"px";var e,i,o=0;for(e=0;f>e;e++)for(u.push([]),i=0;v>i;i++){var r=new Onepopcorn.Tile(e*f+i,n);r.type=m.CLEAR,l.appendChild(r.el),u[e][i]=r,o++}for(var c=h;c>0;){var p=a(),d=s(p),w=u[d[0]][d[1]];w.type===m.CLEAR&&(w.type=m.BOMB,c--)}e=i=o=c=null,O.start(),t.onfocus=function(){O.start()},t.onblur=function(){O.stop()}}function n(t){var e=s(t),n=u[e[0]][e[1]];if(n.type===m.BOMB)n.setValue("x"),i();else{n.type=m.CHECKED;var r=c(e[0],e[1]);0===r?(n.setValue(""),o(e[0],e[1])):n.setValue(r),p++,p===d&&i(!0)}return!1}function i(e){O.stop();var n=e===!0?"CONGRATULATIONS YOU WIN":"GAME OVER",i=t.confirm(n+"\nplay again?");i&&(t.location="/")}function o(t,e){for(var i in w){var o=w[i];if(r(t+o.row,e+o.col)){var c=u[t+o.row][e+o.col];c.type!==m.CHECKED&&n(c.id)}}}function r(t,e){return t>=0&&f>t&&e>=0&&v>e}function c(t,e){var n=0;for(var i in w){var o=w[i];r(t+o.row,e+o.col)&&u[t+o.row][e+o.col].type===m.BOMB&&n++}return n}function s(t){var e=Math.floor(t/v),n=t-e*f;return[e,n]}function a(){var t=Math.round(f*v*Math.random());return t}var l=document.querySelector("#gameboard"),u=[],p=0,h=10,f=7,v=7,d=f*v-h,m={CLEAR:0,BOMB:1,CHECKED:-1},w=[{row:-1,col:-1},{row:-1,col:0},{row:-1,col:1},{row:0,col:1},{row:1,col:1},{row:1,col:0},{row:1,col:-1},{row:0,col:-1}],O=new Onepopcorn.Timer("timer");e()}(window);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiT25lcG9wY29ybiIsIlRpbWVyIiwiaWQiLCJ0b1RpbWUiLCJtaW51dGVzIiwicGFyc2VJbnQiLCJfY291bnRlciIsInNlY29uZHMiLCJ0b1N0cmluZyIsImxlbmd0aCIsInRoaXMiLCJlbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl90aW1lcklkIiwidGhpc19pc0FjdGl2ZSIsInNlbGYiLCJ1cGRhdGUiLCJpbm5lckhUTUwiLCJwcm90b3R5cGUiLCJzdGFydCIsIl9pc0FjdGl2ZSIsInNldEludGVydmFsIiwic3RvcCIsImNsZWFySW50ZXJ2YWwiLCJUaWxlIiwiY2FsbGJhY2siLCJvbkNsaWNrIiwiZSIsInByZXZlbnREZWZhdWx0Iiwib25SaWdodENsaWNrIiwiY2hlY2siLCJjaGVja2VkIiwidHlwZSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc05hbWUiLCJhcHBlbmRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1bmJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0VmFsdWUiLCJ2YWwiLCJ3aW5kb3ciLCJpbml0IiwiYm9hcmQiLCJzdHlsZSIsIndpZHRoIiwiQ09MU19OVU0iLCJpIiwiaiIsImNvdW50IiwiUk9XU19OVU0iLCJ0aWxlcyIsInB1c2giLCJ0IiwicmV2ZWFsQ2hlY2tib3giLCJUWVBFIiwiQ0xFQVIiLCJ0b3RhbE1pbmVzIiwiTUlORVNfTlVNIiwiaWR4IiwiZ2V0UmFuZG9tVGlsZUluZGV4IiwiY29vcmRzIiwiZ2V0VGlsZUZyb21JbmRleCIsInRpbGUiLCJCT01CIiwidGltZXIiLCJvbmZvY3VzIiwib25ibHVyIiwiZ2FtZW92ZXIiLCJDSEVDS0VEIiwibWluZXNOZWFyIiwiY2hlY2tOZWFyTWluZXMiLCJjbGVhck5lYXJNaW5lcyIsImRpc2FybWVkIiwiQ0xFQVJfVElMRVMiLCJ3aW4iLCJtZXNzYWdlIiwiY29uZmlybSIsImxvY2F0aW9uIiwicm93IiwiY29sIiwiRElSRUNUSU9OUyIsImRpciIsImlzSW5Cb3VuZHMiLCJtaW5lcyIsIk1hdGgiLCJmbG9vciIsInJkbiIsInJvdW5kIiwicmFuZG9tIl0sIm1hcHBpbmdzIjoiQUFDQSxHQUFJQSxZQUFhQSxnQkFXakIsV0FDQ0EsV0FBV0MsTUFBUSxTQUFVQyxHQVE1QixRQUFTQyxLQUNSLEdBQUlDLEdBQVVDLFNBQVNDLEVBQVcsSUFDakNDLEVBQVVGLFNBQVNDLEdBQVksRUFLaEMsT0FIQUYsR0FBVUEsRUFBUUksV0FBV0MsT0FBUyxFQUFJTCxFQUFVLElBQU1BLEVBQzFERyxFQUFVQSxFQUFRQyxXQUFXQyxPQUFTLEVBQUlGLEVBQVUsSUFBTUEsRUFFbkRILEVBQVUsSUFBTUcsRUFkeEJHLEtBQUtDLEdBQUtDLFNBQVNDLGNBQWMsSUFBSVgsR0FDckNRLEtBQUtJLFNBQVcsS0FDaEJDLGVBQWdCLENBQ2hCLElBQUlULEdBQVcsRUFDWFUsRUFBT04sSUFhWEEsTUFBS08sT0FBUyxXQUNiWCxJQUNBVSxFQUFLTCxHQUFHTyxVQUFZZixNQUt0QkgsV0FBV0MsTUFBTWtCLFVBQVVDLE1BQVEsV0FDOUJWLEtBQUtXLFlBQ1JYLEtBQUtJLFNBQVdRLFlBQVlaLEtBQUtPLE9BQU8sS0FDeENQLEtBQUtXLFdBQWEsSUFJcEJyQixXQUFXQyxNQUFNa0IsVUFBVUksS0FBTyxXQUM5QmIsS0FBS1csWUFFUEcsY0FBY2QsS0FBS0ksVUFDbkJKLEtBQUtXLFdBQVksT0FhcEIsV0FDQ3JCLFdBQVd5QixLQUFPLFNBQVV2QixFQUFHd0IsR0FjOUIsUUFBU0MsR0FBUUMsR0FDaEJBLEVBQUVDLGlCQUNGYixFQUFLVSxTQUFTVixFQUFLZCxJQUtwQixRQUFTNEIsR0FBYUYsR0FDckJBLEVBQUVDLGlCQUNGYixFQUFLZSxNQUFNQyxTQUFXaEIsRUFBS2UsTUFBTUMsUUF0QmxDLEdBQUloQixHQUFPTixJQUNYQSxNQUFLUixHQUFLQSxFQUNWUSxLQUFLdUIsS0FBTyxFQUNadkIsS0FBS2dCLFNBQVdBLEVBRWhCaEIsS0FB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QUNaLEtBQUksR0FBSXJDLEtBQUtrQyxHQUNiLENBQ0MsR0FBSUMsR0FBTUQsRUFBV2xDLEVBQ2pCb0MsR0FBV0osRUFBTUcsRUFBSUgsSUFBS0MsRUFBTUUsRUFBSUYsTUFLckM3QixFQUFNNEIsRUFBTUcsRUFBSUgsS0FBS0MsRUFBTUUsRUFBSUYsS0FBS2pELE9BQVN3QixFQUFLUyxNQUNwRG9CLElBSUYsTUFBT0EsR0FJUixRQUFTdEIsR0FBaUJILEdBQ3pCLEdBQUlvQixHQUFNTSxLQUFLQyxNQUFNM0IsRUFBTWIsR0FDMUJrQyxFQUFNckIsRUFBTW9CLEVBQU03QixDQUNuQixRQUFRNkIsRUFBSUMsR0FHYixRQUFTcEIsS0FDUixHQUFJMkIsR0FBTUYsS0FBS0csTUFBTXRDLEVBQVdKLEVBQVd1QyxLQUFLSSxTQUNoRCxPQUFPRixHQXJLUixHQUFJNUMsR0FBY2pDLFNBQVNDLGNBQWMsY0FDeEN3QyxLQUNBc0IsRUFBYyxFQUNkZixFQUFjLEdBQ2RSLEVBQWMsRUFDZEosRUFBYyxFQUNkNEIsRUFBY3hCLEVBQVdKLEVBQVdZLEVBQ3BDSCxHQUFlQyxNQUFRLEVBQUVRLEtBQU8sRUFBRUssUUFBWSxJQUM5Q1ksSUFDRUYsSUFBTSxHQUFHQyxJQUFNLEtBQ2ZELElBQU0sR0FBR0MsSUFBTSxJQUNmRCxJQUFNLEdBQUdDLElBQU0sSUFDZkQsSUFBTSxFQUFFQyxJQUFNLElBQ2RELElBQU0sRUFBR0MsSUFBTSxJQUNmRCxJQUFNLEVBQUdDLElBQU0sSUFDZkQsSUFBTSxFQUFHQyxJQUFNLEtBQ2ZELElBQU0sRUFBRUMsSUFBTSxLQUdiZixFQUFRLEdBQUluRSxZQUFXQyxNQUFNLFFBc0pqQzJDLE1BQ0VEIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEZWZpbmUgbW9kdWxlIG5hbWVzcGFjZVxyXG52YXIgT25lcG9wY29ybiA9IE9uZXBvcGNvcm4gfHwge307XHJcblxyXG4vKlxyXG4gKiBAQ2xhc3MgVGltZXJcclxuICogXHJcbiAqIEEgc3RvcHdhdGNoIGNsYXNzIHRvIGNvdW50IGVsYXBzZWQgbWludXRlcyBhbmQgc2Vjb25kcy5cclxuICpcclxuICogQG5hbWVzcGFjZSBPbmVwb3Bjb3JuXHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBJZCBvZiB0aGUgSFRNTCBlbGVtZW50IHRoYXQgaG9sZHMgdGhlIGNvdW50ZXIuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblx0T25lcG9wY29ybi5UaW1lciA9IGZ1bmN0aW9uIChpZCl7XHJcblx0XHR0aGlzLmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycraWQpO1xyXG5cdFx0dGhpcy5fdGltZXJJZCA9IG51bGw7XHJcblx0XHR0aGlzX2lzQWN0aXZlID0gZmFsc2U7XHJcblx0XHR2YXIgX2NvdW50ZXIgPSAwO1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdC8vIFByaXZhdGUgbWV0aG9kc1xyXG5cdFx0ZnVuY3Rpb24gdG9UaW1lKCl7XHJcblx0XHRcdHZhciBtaW51dGVzID0gcGFyc2VJbnQoX2NvdW50ZXIgLyA2MCksXHJcblx0XHRcdFx0c2Vjb25kcyA9IHBhcnNlSW50KF9jb3VudGVyKSAlIDYwO1xyXG5cdFx0XHRcclxuXHRcdFx0bWludXRlcyA9IG1pbnV0ZXMudG9TdHJpbmcoKS5sZW5ndGggPiAxID8gbWludXRlcyA6IFwiMFwiICsgbWludXRlcztcclxuXHRcdFx0c2Vjb25kcyA9IHNlY29uZHMudG9TdHJpbmcoKS5sZW5ndGggPiAxID8gc2Vjb25kcyA6IFwiMFwiICsgc2Vjb25kcztcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiBtaW51dGVzICsgXCI6XCIgKyBzZWNvbmRzO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKCl7XHJcblx0XHRcdF9jb3VudGVyKys7XHJcblx0XHRcdHNlbGYuZWwuaW5uZXJIVE1MID0gdG9UaW1lKCk7XHJcblx0XHR9O1xyXG5cdH07XHJcblxyXG5cdC8vIFB1YmxpYyBtZXRob2RzXHJcblx0T25lcG9wY29ybi5UaW1lci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpe1xyXG5cdFx0aWYoIXRoaXMuX2lzQWN0aXZlKXtcclxuXHRcdFx0dGhpcy5fdGltZXJJZCA9IHNldEludGVydmFsKHRoaXMudXBkYXRlLDEwMDApO1xyXG5cdFx0XHR0aGlzLl9pc0FjdGl2ZSA9ICB0cnVlO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdE9uZXBvcGNvcm4uVGltZXIucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCl7XHJcblx0XHRpZih0aGlzLl9pc0FjdGl2ZSlcclxuXHRcdHtcclxuXHRcdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLl90aW1lcklkKTtcclxuXHRcdFx0dGhpcy5faXNBY3RpdmUgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9O1xyXG59KSgpO1xyXG5cclxuLypcclxuICogQENsYXNzIFRpbGVcclxuICogXHJcbiAqIEEgY2xhc3MgdG8gaGFuZGxlIHRoZSB0aWxlIGVsZW1lbnRzIGFuZCBhY3Rpb25zXHJcbiAqXHJcbiAqIEBwYXJhbSB7SW50fSBJRCBvZiB0aGUgdGlsZVxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBDYWxsYmFjayB0byBiZSB0cmlnZ2VyZWQgb24gY2xpY2tcclxuICovXHJcbihmdW5jdGlvbigpe1xyXG5cdE9uZXBvcGNvcm4uVGlsZSA9IGZ1bmN0aW9uIChpZCxjYWxsYmFjayl7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHR0aGlzLmlkID0gaWQ7XHJcblx0XHR0aGlzLnR5cGUgPSAwOyAvLyBBbHdheXMgaW5pdGlhbGl6ZWQgYXMgVFlQRS5DTEVBUiBvciAwXHJcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblx0XHQvLyBDcmVhdGUgYW5kIGFzc2lnbiBjaGVja2JveCBlbGVtZW50XHJcblx0XHR0aGlzLmNoZWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuXHRcdHRoaXMuY2hlY2suc2V0QXR0cmlidXRlKCd0eXBlJywnY2hlY2tib3gnKTtcclxuXHRcdC8vIENyZWF0ZSBhbmQgYXNzaWduIGRpdiBlbGVtZW50XHJcblx0XHR0aGlzLmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblx0XHR0aGlzLmVsLmNsYXNzTmFtZSA9IFwidGlsZVwiO1xyXG5cdFx0dGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ2lkJyxpZCk7XHJcblx0XHR0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMuY2hlY2spO1xyXG5cdFx0XHJcblx0XHRmdW5jdGlvbiBvbkNsaWNrKGUpe1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHNlbGYuY2FsbGJhY2soc2VsZi5pZCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmNoZWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxvbkNsaWNrKTtcclxuXHJcblx0XHQvLyBUaGlzIGlzIHVzZWQgdG8gbWFyayBhIGNoZWNrYm94IGFzIGEgbWluZXN3ZWVwZXIgXCJmbGFnXCIgd2l0aCB0aGUgcmlnaHQgbW91c2UgYnV0dG9uXHJcblx0XHRmdW5jdGlvbiBvblJpZ2h0Q2xpY2soZSl7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0c2VsZi5jaGVjay5jaGVja2VkID0gIXNlbGYuY2hlY2suY2hlY2tlZDtcclxuXHRcdH1cclxuXHRcdHRoaXMuY2hlY2suYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLG9uUmlnaHRDbGljayk7XHJcblxyXG5cdFx0dGhpcy51bmJpbmQgPSBmdW5jdGlvbiB1bmJpbmQoKXtcclxuXHRcdFx0dGhpcy5jaGVjay5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsb25DbGljayk7XHJcblx0XHR9O1xyXG5cdH07IFxyXG5cdC8vIFRoaXMgbXVzdCBzZXQgdGhlIG5lYXIgYm9tYnMgbnVtYmVyIG9yIGVtcHR5IHZhbHVlLlxyXG5cdE9uZXBvcGNvcm4uVGlsZS5wcm90b3R5cGUuc2V0VmFsdWUgPSBmdW5jdGlvbih2YWwpe1xyXG5cdFx0dGhpcy51bmJpbmQoKTtcclxuXHRcdHRoaXMuZWwuaW5uZXJIVE1MID0gdmFsO1xyXG5cdH07XHJcblxyXG59KSgpO1xyXG5cclxuKGZ1bmN0aW9uKHdpbmRvdyl7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cdC8vIENhY2hlIHRoZSBib2FyZCBlbGVtZW50XHJcblx0dmFyIGJvYXJkICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dhbWVib2FyZCcpLFxyXG5cdFx0dGlsZXMgICAgICAgPSBbXSxcclxuXHRcdGRpc2FybWVkICAgID0gMCxcclxuXHRcdE1JTkVTX05VTSAgID0gMTAsXHJcblx0XHRST1dTX05VTSAgICA9IDcsXHJcblx0XHRDT0xTX05VTSAgICA9IDcsXHJcblx0XHRDTEVBUl9USUxFUyA9IFJPV1NfTlVNICogQ09MU19OVU0gLSBNSU5FU19OVU0sXHJcblx0XHRUWVBFICAgICAgICA9IHtcIkNMRUFSXCI6MCxcIkJPTUJcIjoxLFwiQ0hFQ0tFRFwiIDogLTF9LFxyXG5cdFx0RElSRUNUSU9OUyAgPSBbXHJcblx0XHRcdHtcInJvd1wiOi0xLFwiY29sXCI6LTF9LCAvLyBVcHBlciBsZWZ0IHRpbGVcclxuXHRcdFx0e1wicm93XCI6LTEsXCJjb2xcIjowfSwgLy8gVXBwZXIgdGlsZVxyXG5cdFx0XHR7XCJyb3dcIjotMSxcImNvbFwiOjF9LCAvLyBVcHBlciByaWdodCB0aWxlXHJcblx0XHRcdHtcInJvd1wiOjAsXCJjb2xcIjoxfSwgLy8gUmlnaHQgdGlsZVxyXG5cdFx0XHR7XCJyb3dcIjorMSxcImNvbFwiOisxfSwgLy8gUmlnaHQgZG93biB0aWxlXHJcblx0XHRcdHtcInJvd1wiOisxLFwiY29sXCI6MH0sIC8vIERvd24gdGlsZVxyXG5cdFx0XHR7XCJyb3dcIjorMSxcImNvbFwiOi0xfSwgLy8gRG93biBsZWZ0IHRpbGVcclxuXHRcdFx0e1wicm93XCI6MCxcImNvbFwiOi0xfSwgLy8gTGVmdCB0aWxlXHJcblx0XHRdO1xyXG5cclxuXHR2YXIgdGltZXIgPSBuZXcgT25lcG9wY29ybi5UaW1lcihcInRpbWVyXCIpO1xyXG5cdFxyXG5cdC8vIEluaXRpYWxpemUgZ2FtZVxyXG5cdGZ1bmN0aW9uIGluaXQgKCl7XHJcblx0XHQvLyBTZXQgYm9hcmQgY29ycmVjdCBzaXplXHJcblx0XHRib2FyZC5zdHlsZS53aWR0aCA9IENPTFNfTlVNICogMTMgKyBcInB4XCI7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGdhbWUgYm9hcmQgJiBhcnJheVxyXG5cdFx0dmFyIGksaixjb3VudCA9IDA7XHJcblx0XHRmb3IoaT0wO2k8Uk9XU19OVU07aSsrKVxyXG5cdFx0e1xyXG5cdFx0XHR0aWxlcy5wdXNoKFtdKTtcclxuXHRcdFx0Zm9yKGo9MDtqPENPTFNfTlVNO2orKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciB0ID0gbmV3IE9uZXBvcGNvcm4uVGlsZShpICogUk9XU19OVU0gKyBqLHJldmVhbENoZWNrYm94KTtcclxuXHRcdFx0XHR0LnR5cGUgPSBUWVBFLkNMRUFSO1xyXG5cdFx0XHRcdGJvYXJkLmFwcGVuZENoaWxkKHQuZWwpO1xyXG5cdFx0XHRcdHRpbGVzW2ldW2pdID0gdDtcclxuXHRcdFx0XHRjb3VudCsrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2V0IHJhbmRvbSBtaW5lc1xyXG5cdFx0dmFyIHRvdGFsTWluZXMgPSBNSU5FU19OVU07XHJcblx0XHR3aGlsZSh0b3RhbE1pbmVzID4gMClcclxuXHRcdHtcclxuXHRcdFx0dmFyIGlkeCAgICA9IGdldFJhbmRvbVRpbGVJbmRleCgpLFxyXG5cdFx0XHRcdGNvb3JkcyA9IGdldFRpbGVGcm9tSW5kZXgoaWR4KSxcclxuXHRcdFx0XHR0aWxlICAgPSB0aWxlc1tjb29yZHNbMF1dW2Nvb3Jkc1sxXV07XHJcblx0XHRcdFxyXG5cdFx0XHRpZih0aWxlLnR5cGUgPT09IFRZUEUuQ0xFQVIpXHJcblx0XHRcdHtcclxuXHRcdFx0XHR0aWxlLnR5cGUgPSBUWVBFLkJPTUI7XHJcblx0XHRcdFx0dG90YWxNaW5lcy0tO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2xlYW4gdW5uZWNlc3NhcnkgdmFyc1xyXG5cdFx0aSA9IGogPSBjb3VudCA9IHRvdGFsTWluZXMgPSBudWxsO1xyXG5cclxuXHRcdC8vIFN0YXJ0IHRpbWVyICYga2VlcCBydW5uaW5nIG9ubHkgaWYgY3VycmVudCB0YWIgaXMgaW4gZm9jdXNcclxuXHRcdHRpbWVyLnN0YXJ0KCk7XHJcblx0XHR3aW5kb3cub25mb2N1cyA9IGZ1bmN0aW9uKCl7XHJcblx0XHRcdHRpbWVyLnN0YXJ0KCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdHdpbmRvdy5vbmJsdXIgPSBmdW5jdGlvbigpe1xyXG5cdFx0XHR0aW1lci5zdG9wKCk7XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0Ly8gVGhpcyBpcyB1c2VkIHRvIHJlbW92ZSBhIGNoZWNrYm94IGFuZCByZXZlYWwgd2hhdCdzIGJlaGluZFxyXG5cdGZ1bmN0aW9uIHJldmVhbENoZWNrYm94IChpZCl7XHJcblx0XHQvLyBHZXQgdGhlIHZhbHVlIFwiYmVoaW5kXCIgdGhlIHRpbGVcclxuXHRcdHZhciBjb29yZHMgPSBnZXRUaWxlRnJvbUluZGV4KGlkKSxcclxuXHRcdFx0dGlsZSAgID0gdGlsZXNbY29vcmRzWzBdXVtjb29yZHNbMV1dO1xyXG5cclxuXHRcdC8vIElmIHZhbHVlIGlzIGEgbWluZSB5b3UgbG9zZSBpZiBub3QgY29udGludWUgcGxheWluZ1xyXG5cdFx0aWYodGlsZS50eXBlID09PSBUWVBFLkJPTUIpXHJcblx0XHR7XHJcblx0XHRcdHRpbGUuc2V0VmFsdWUoJ3gnKTtcclxuXHRcdFx0Z2FtZW92ZXIoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIE1hcmsgYXMgcmV2ZWFsZWRcclxuXHRcdFx0dGlsZS50eXBlID0gVFlQRS5DSEVDS0VEO1xyXG5cdFx0XHQvLyBDaGVjayBob3cgbWFueSBtaW5lcyBhcmUgbmVhclxyXG5cdFx0XHR2YXIgbWluZXNOZWFyID0gY2hlY2tOZWFyTWluZXMoY29vcmRzWzBdLGNvb3Jkc1sxXSk7XHJcblx0XHRcdGlmKG1pbmVzTmVhciA9PT0gMCkge1xyXG5cdFx0XHRcdHRpbGUuc2V0VmFsdWUoJycpO1xyXG5cdFx0XHRcdC8vIENoZWNrIG5lYXIgbWluZXMgYWdhaW5cclxuXHRcdFx0XHRjbGVhck5lYXJNaW5lcyhjb29yZHNbMF0sY29vcmRzWzFdKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aWxlLnNldFZhbHVlKG1pbmVzTmVhcik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIGFsbCBtaW5lcyBoYXMgYmVlbiByZW1vdmVkXHJcblx0XHRcdGRpc2FybWVkKys7XHJcblx0XHRcdGlmKGRpc2FybWVkID09PSAgQ0xFQVJfVElMRVMpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRnYW1lb3Zlcih0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZ2FtZW92ZXIgKHdpbil7XHJcblx0XHR0aW1lci5zdG9wKCk7XHJcblx0XHR2YXIgbWVzc2FnZSA9IHdpbiA9PT0gdHJ1ZSA/IFwiQ09OR1JBVFVMQVRJT05TIFlPVSBXSU5cIiA6IFwiR0FNRSBPVkVSXCI7XHJcblx0XHR2YXIgY29uZmlybSA9IHdpbmRvdy5jb25maXJtKG1lc3NhZ2UrXCJcXG5wbGF5IGFnYWluP1wiKTtcclxuXHRcdGlmIChjb25maXJtKVxyXG5cdFx0e1xyXG5cdFx0XHQvLyBJIGtub3cgdGhpcyBpcyB2ZXJ5IGxhenkgc29sdXRpb24uIEEgcmVhbCBjb29sIGNvb2wgb25lIFxyXG5cdFx0XHQvLyAgc2hvdWxkIGNsZWFuIGV2ZXJ5dGhpbmcgYW5kIHNldCBhIG5ldyBnYW1lLlxyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24gPSBcIi9cIjtcclxuXHRcdH1cclxuXHRcdFxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gY2xlYXJOZWFyTWluZXMgKHJvdyxjb2wpe1xyXG5cdFx0Zm9yKHZhciBpIGluIERJUkVDVElPTlMpXHJcblx0XHR7XHJcblx0XHRcdHZhciBkaXIgPSBESVJFQ1RJT05TW2ldO1xyXG5cdFx0XHRpZighaXNJbkJvdW5kcyhyb3cgKyBkaXIucm93LCBjb2wgKyBkaXIuY29sKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciB0aWxlID0gdGlsZXNbcm93ICsgZGlyLnJvd11bY29sICsgZGlyLmNvbF07XHJcblx0XHRcdGlmKHRpbGUudHlwZSAhPT0gVFlQRS5DSEVDS0VEKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV2ZWFsQ2hlY2tib3godGlsZS5pZCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEhlbHBlciBmdW5jdGlvbiB0byBjaGVjayBpZiBhbmFsaXplZCB0aWxlIGV4aXN0cy5cclxuXHRmdW5jdGlvbiBpc0luQm91bmRzIChyb3csY29sKXtcclxuXHRcdHJldHVybiByb3cgPj0gMCAmJiByb3cgPCBST1dTX05VTSAmJiBjb2wgPj0gMCAmJiBjb2wgPCBDT0xTX05VTTtcclxuXHR9XHJcblx0Ly8gVE9ETzogTG9vayBhdCBmbG9vZCBmaWxsIGFsZ29yaXRobVxyXG5cdGZ1bmN0aW9uIGNoZWNrTmVhck1pbmVzIChyb3csY29sKXtcclxuXHRcdHZhciBtaW5lcyA9IDA7XHJcblx0XHRmb3IodmFyIGkgaW4gRElSRUNUSU9OUylcclxuXHRcdHtcclxuXHRcdFx0dmFyIGRpciA9IERJUkVDVElPTlNbaV07XHJcblx0XHRcdGlmKCFpc0luQm91bmRzKHJvdyArIGRpci5yb3csIGNvbCArIGRpci5jb2wpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Y29udGludWU7XHRcclxuXHRcdFx0fSBcclxuXHJcblx0XHRcdGlmKHRpbGVzW3JvdyArIGRpci5yb3ddW2NvbCArIGRpci5jb2xdLnR5cGUgPT09IFRZUEUuQk9NQil7XHJcblx0XHRcdFx0bWluZXMrKztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gbWluZXM7XHJcblx0fVxyXG5cclxuXHQvLyBHZXQgcm93IGFuZCBjb2wgZm9yIGEgZ2l2ZW4gY2hpbGQgaW5kZXhcclxuXHRmdW5jdGlvbiBnZXRUaWxlRnJvbUluZGV4KGlkeCl7XHJcblx0XHR2YXIgcm93ID0gTWF0aC5mbG9vcihpZHggLyBDT0xTX05VTSksXHJcblx0XHRcdGNvbCA9IGlkeCAtIHJvdyAqIFJPV1NfTlVNO1xyXG5cdFx0cmV0dXJuIFtyb3csY29sXTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGdldFJhbmRvbVRpbGVJbmRleCgpe1xyXG5cdFx0dmFyIHJkbiA9IE1hdGgucm91bmQoUk9XU19OVU0gKiBDT0xTX05VTSAqIE1hdGgucmFuZG9tKCkgKTtcclxuXHRcdHJldHVybiByZG47XHJcblx0fVxyXG5cclxuXHQvLyBMZXQncyBzdGFydFxyXG5cdGluaXQoKTtcclxufSkod2luZG93KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=