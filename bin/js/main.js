var Onepopcorn=Onepopcorn||{};Onepopcorn.Timer=function(t){function e(){var t=parseInt(n/60),e=parseInt(n)%60;return t=t.toString().length>1?t:"0"+t,e=e.toString().length>1?e:"0"+e,t+":"+e}this.el=document.querySelector("#"+t),this._timerId=null,this_isActive=!1;var n=0,i=this;this.update=function(){n++,i.el.innerHTML=e()}},Onepopcorn.Timer.prototype.start=function(){this._isActive||(this._timerId=setInterval(this.update,1e3),this._isActive=!0)},Onepopcorn.Timer.prototype.stop=function(){this._isActive&&(clearInterval(this._timerId),this._isActive=!1)},Onepopcorn.Tile=function(t,e){function n(t){t.preventDefault(),r.callback(r.id)}function i(t){t.preventDefault(),r.check.checked=!r.check.checked}var r=this;this.id=t,this.type=0,this.callback=e,this.check=document.createElement("input"),this.check.setAttribute("type","checkbox"),this.el=document.createElement("div"),this.el.className="tile",this.el.setAttribute("id",t),this.el.appendChild(this.check),this.check.addEventListener("click",n),this.check.addEventListener("contextmenu",i),this.unbind=function(){this.check.removeEventListener("click",n)}},Onepopcorn.Tile.prototype.setValue=function(t){this.unbind(),this.el.innerHTML=t},function(t){"use strict";function e(){l.style.width=13*f+"px";var e,i,r=0;for(e=0;v>e;e++)for(u.push([]),i=0;f>i;i++){var o=new Onepopcorn.Tile(e*v+i,n);o.type=m.CLEAR,l.appendChild(o.el),u[e][i]=o,r++}for(var c=p;c>0;){var h=a(),d=s(h),O=u[d[0]][d[1]];O.type===m.CLEAR&&(O.type=m.BOMB,c--)}e=i=r=c=null,y.start(),t.onfocus=function(){y.start()},t.onblur=function(){y.stop()}}function n(t){var e=s(t),n=u[e[0]][e[1]];if(n.type===m.BOMB)n.setValue("x"),i();else{n.type=m.CHECKED;var o=c(e[0],e[1]);0===o?(n.setValue(""),r(e[0],e[1])):n.setValue(o),h++,h===d&&i(!0)}return!1}function i(e){y.stop();var n=e===!0?"CONGRATULATIONS YOU WIN":"GAME OVER",i=t.confirm(n+"\nplay again?");i&&(t.location="/")}function r(t,e){for(var i in O){var r=O[i];if(o(t+r.row,e+r.col)){var c=u[t+r.row][e+r.col];c.type!==m.CHECKED&&n(c.id)}}}function o(t,e){return t>=0&&v>t&&e>=0&&f>e}function c(t,e){var n=0;for(var i in O){var r=O[i];o(t+r.row,e+r.col)&&u[t+r.row][e+r.col].type===m.BOMB&&n++}return n}function s(t){var e=Math.floor(t/f),n=t-e*v;return[e,n]}function a(){var t=Math.round(v*f*Math.random());return t}var l=document.querySelector("#gameboard"),u=[],h=0,p=10,v=7,f=7,d=v*f-p,m={CLEAR:0,BOMB:1,CHECKED:-1},O=[{row:-1,col:-1},{row:-1,col:0},{row:-1,col:1},{row:0,col:1},{row:1,col:1},{row:1,col:0},{row:1,col:-1},{row:0,col:-1}],y=new Onepopcorn.Timer("timer");e()}(this);
//# sourceMappingURL=main.js.map