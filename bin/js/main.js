var Onepopcorn=Onepopcorn||{};Onepopcorn.Timer=function(e){function t(){c++,r.el.innerHTML=n()}function n(){var e=parseInt(c/60),t=parseInt(c)%60;return e=e.toString().length>1?e:"0"+e,t=t.toString().length>1?t:"0"+t,e+":"+t}this.el=document.querySelector("#"+e);var r=this,o=null,c=0,i=!1;Onepopcorn.Timer.prototype.start=function(){i||(o=setInterval(t,1e3),i=!0)},Onepopcorn.Timer.prototype.stop=function(){i&&(clearInterval(o),i=!1)}},Onepopcorn.Tile=function(e,t){function n(e){e.preventDefault(),o.callback(o.id)}function r(e){e.preventDefault(),o.check.checked=!o.check.checked}var o=this;this.id=e,this.type=0,this.callback=t,this.check=document.createElement("input"),this.check.setAttribute("type","checkbox"),this.el=document.createElement("div"),this.el.className="tile",this.el.setAttribute("id",e),this.el.appendChild(this.check),this.check.addEventListener("click",n),this.check.addEventListener("contextmenu",r),Onepopcorn.Tile.prototype.setValue=function(e){this.check.removeEventListener("click",n),this.el.innerHTML=e}},function(e){"use strict";function t(){u.style.width=13*v+"px";var t,r,o=0;for(t=0;f>t;t++)for(p.push([]),r=0;v>r;r++){var c=new Onepopcorn.Tile(t*f+r,n);c.type=m.CLEAR,u.appendChild(c.el),p[t][r]=c,o++}for(var i=h;i>0;){var s=a(),d=l(s),O=p[d[0]][d[1]];O.type===m.CLEAR&&(O.type=m.BOMB,i--)}t=r=o=i=null,y.start(),e.onfocus=function(){y.start()},e.onblur=function(){y.stop()}}function n(e){var t=l(e),n=p[t[0]][t[1]];if(n.type===m.BOMB)n.setValue("x"),r();else{n.type=m.CHECKED;var c=i(t[0],t[1]);0===c?(n.setValue(""),o(t[0],t[1])):n.setValue(c),s++,s===d&&r(!0)}return!1}function r(t){y.stop();var n=t===!0?"CONGRATULATIONS YOU WIN":"GAME OVER",r=e.confirm(n+"\nplay again?");r&&(e.location="/")}function o(e,t){for(var r in O){var o=O[r];if(c(e+o.row,t+o.col)){var i=p[e+o.row][t+o.col];i.type!==m.CHECKED&&n(i.id)}}}function c(e,t){return e>=0&&f>e&&t>=0&&v>t}function i(e,t){var n=0;for(var r in O){var o=O[r];c(e+o.row,t+o.col)&&p[e+o.row][t+o.col].type===m.BOMB&&n++}return n}function l(e){var t=Math.floor(e/v),n=e-t*f;return[t,n]}function a(){var e=Math.round(f*v*Math.random());return e}var u=document.querySelector("#gameboard"),p=[],s=0,h=10,f=7,v=7,d=f*v-h,m={CLEAR:0,BOMB:1,CHECKED:-1},O=[{row:-1,col:-1},{row:-1,col:0},{row:-1,col:1},{row:0,col:1},{row:1,col:1},{row:1,col:0},{row:1,col:-1},{row:0,col:-1}],y=new Onepopcorn.Timer("timer");t()}(this);
//# sourceMappingURL=main.js.map